<div>
  <div class="col">
    <div class="card">
      <div class="card-header card-header-primary card-header-icon">
        <div class="card-icon">
          <mat-icon class="material-icons">local_parking</mat-icon>
        </div>
        <h4 class="card-title pull-left" *ngIf="!user.firstName">Statment</h4>
        <h4 class="card-title pull-left" *ngIf="user.firstName">
          Payments of {{ user.firstName }} {{ user.lastName }}
        </h4>
      </div>
      <hr />
      <div class="card-body card-body-height">
        <div>
          <app-date-range-input
            [placeholder]="'Select date range'"
            (callBack)="dateChange($event)"
            [startDate]="startDate"
            [endDate]="endDate"
            [max]="endDate"
          ></app-date-range-input>
        </div>
        <div>
          <app-table
            [tableData]="tableData"
            [oderBy]="tableOrder"
            [buttons]="
              sharedService.userData$.value.role === 'Admin' ? [buttons[0]] : []
            "
            (buttonCallback)="buttonCallback($event)"
          ></app-table>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #addNewPayment>
  <div>
    <div class="row mb-2">
      <div class="col-12">
        <mat-toolbar class="p-0 w-100 mat-toolbar">
          <mat-toolbar-row>
            <span>Add new payment</span>

            <div class="row flex-fill">
              <div class="d-flex justify-content-end">
                <app-button
                  class="mr-2"
                  [button]="buttons[2]"
                  (callBack)="buttonCallback(2)"
                ></app-button>
              </div>
            </div>
          </mat-toolbar-row>
        </mat-toolbar>
      </div>
    </div>

    <div class="row">
      <div class="col-4 my-auto">
        <app-label [label]="'Payment type'"></app-label>
      </div>
      <div class="col">
        <app-mutli-select
          (selected)="newPayment.paymentType = $event"
          [options]="paymentType"
          [placeholder]="'Select paymment type'"
        ></app-mutli-select>
      </div>
    </div>

    <div class="row">
      <div class="col-4 my-auto">
        <app-label [label]="'Amount'"></app-label>
      </div>
      <div class="col">
        <app-input
          [type]="'number'"
          [value]="newPayment.amount"
          (callBack)="newPayment.amount = $event"
        ></app-input>
      </div>
    </div>

    <div class="row">
      <div class="col-4 my-auto">
        <app-label [label]="'Description'"></app-label>
      </div>
      <div class="col">
        <app-textarea
          [value]="newPayment.description"
          [inputWidth]="'100%'"
          (callBack)="newPayment.description = $event"
        ></app-textarea>
      </div>
    </div>

    <div class="d-flex justify-content-end me-4">
      <app-button
        [button]="buttons[1]"
        (callBack)="buttonCallback(1)"
      ></app-button>
    </div>
  </div>
</ng-template>

<app-modal
  *ngIf="myModal"
  [template_]="addNewPayment"
  (callback)="myModal = false"
  [customHeight]="modalHeight"
  [customMaxHeight]="modalMaxHeight"
  [customWidth]="'50%'"
></app-modal>
